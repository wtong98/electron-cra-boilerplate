# Minimalist boilerplate

A basic electron + CRA setup, with ready-built scripts. Written mainly for
me, and to anyone else who's stumbled upon this dark corner of the
web, and happens to need boilerplate.

The project uses [create-react-app](https://create-react-app.dev/) and
[electron-builder](https://www.electron.build/).

It is based heavily off the tutorials by these two fabulous developers:
* [Christian Sepulveda](https://www.freecodecamp.org/news/building-an-electron-application-with-create-react-app-97945861647c/)
* [Randy Findley](https://www.codementor.io/randyfindley/how-to-build-an-electron-app-using-create-react-app-and-electron-builder-ss1k0sfer)

---

## Usage
The project is structured like an app generated by `create-react-app`. The main
entry point for electron is in `public/electron.js`.

Of course, before doing anything, remember to `npm install`.

To run in development:
```shell
$ npm run start-react

# (hopefully) positive output from react.
```
Then simultaneously in a new terminal:
```shell
$ npm start

# output from electron
```

To build for production:
```shell
$ npm run build-react
$ npm run build   # will take a while
```
Then in `dist/`, you should find distributable packages. Give these to your
friends if they'd like to install your app.

And finally, to remove build files:
```shell
$ npm run clean
```

My home system is based on Debian, so the boilerplate is slanted that way. The
configuration is relatively transparent, and altering the build to target your
preferred systems is not difficult. Consult the electron-builder
[docs](https://www.electron.build/cli) for details.


## Quirks
A couple items to be aware of, especially if you're on Debian (or any flavor
of Linux):

### chrome-sandbox
The permissions on `chrome-sandbox` may not be set correctly in order for
`electron` to run. To fix this, modify the relevant executable as per the
error message:

```shell
$ chown root:root /path/to/chrome-sandbox
$ sudo chmod 4755 /path/to/chrome-sandbox
```

Ideally, when preparing a production build, this change would be made
automatically. I haven't gotten around to implementing this yet, but will do so
as soon as I muster the motivation (or get a PR).

### using electron in react
You may not be able to access `electron` from your react app. The following
will throw an error:

```javascript
const electron = require('electron');   // module not found
import electron from 'electron';        // ditto
```

Instead, require from the global `window` object:

```javascript
const electron = window.require('electron');

// you may now work your magic
const fs = electron.remote.require('fs');
const ipcRenderer = electron.ipcRenderer;
```
